{% extends "base.html" %}

{% block content %}
<div class="admin-container">
    <header class="admin-header">
        <h1>Dashboard</h1>
        <div class="header-actions">
            <form id="deploy-form" action="/admin/deploy" method="POST">
                <input type="hidden" name="authenticity_token" value="{{ authenticity_token }}">
                <button type="submit" class="btn">Deploy Live</button>
            </form>
            <a href="/admin/logout" class="btn">Logout</a>
        </div>
    </header>




    <div class="admin-grid">
        <aside class="admin-sidebar">
            <nav>
                <a href="/admin/dashboard" class="nav-link active">Projects</a>
                <a href="/admin/pages" class="nav-link">Pages</a>
                <a href="/admin/settings" class="nav-link">Settings</a>
            </nav>
        </aside>

        <section class="admin-content">
            <div class="admin-content-header">
                <h2>All Projects</h2>
                <a href="/admin/projects/new" class="btn">
                    + New Project
                </a>
            </div>

            <div class="projects-list">
                {% for project in projects %}
                <div class="project-item">
                    <div class="item-info">
                        <h3>{{ project.title }}</h3>
                        <span class="item-meta">{{ project.start_date.year() }}</span>
                    </div>
                    <div class="item-actions">
                        <a href="/project/{{ project.slug }}" target="_blank" title="View" class="icon-btn">
                            <span class="material-icons">visibility</span>
                        </a>
                        <a href="/admin/projects/{{ project.id }}/blocks" class="button">Blocks</a>
                        <a href="/admin/projects/edit/{{ project.id }}" class="button">Edit</a>
                        <form action="/admin/projects/delete/{{ project.id }}" method="POST"
                            class="confirm-delete inline-form">
                            <input type="hidden" name="authenticity_token" value="{{ authenticity_token }}">
                            <button type="submit" class="icon-btn delete">
                                <span class="material-icons">delete</span>
                            </button>
                        </form>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
    </div>
</div>
{% endblock %}